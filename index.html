<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å»ºç‰©ã‚³ã‚¹ãƒˆç®—å‡ºã‚·ã‚¹ãƒ†ãƒ  - Hotel LCC-SaaS</title>
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --bg: #f8f9fa; --border: #ccc; }
        body { font-family: "Segoe UI", "Meiryo", sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        .header { background: var(--primary); color: white; padding: 10px 20px; font-size: 1rem; font-weight: bold; flex-shrink: 0; }
        
        /* ã‚¿ãƒ–ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        .tab-container { background: #ddd; padding: 5px 5px 0 5px; flex-shrink: 0; overflow-x: auto; white-space: nowrap; display: flex; border-bottom: 1px solid var(--border); }
        .tab-btn { padding: 8px 15px; border: 1px solid var(--border); background: #eee; cursor: pointer; border-radius: 5px 5px 0 0; margin-right: 2px; font-size: 12px; }
        .tab-btn.active { background: white; border-bottom: 2px solid white; font-weight: bold; color: var(--accent); }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; background: white; }
        .tab-pane { display: none; padding: 25px; overflow-y: auto; flex: 1; }
        .tab-pane.active { display: block; }

        /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .section-title { font-size: 16px; font-weight: bold; border-left: 5px solid var(--primary); padding-left: 10px; margin-bottom: 15px; color: var(--primary); }
        .card { border: 1px solid var(--border); padding: 15px; border-radius: 5px; margin-bottom: 20px; background: #fff; }
        
        .property-list-area { display: flex; gap: 10px; margin-bottom: 20px; }
        #propertyList { flex: 1; height: 100px; border: 1px solid #aaa; border-radius: 4px; padding: 5px; }
        .btn-col { display: flex; flex-direction: column; gap: 5px; }

        button { cursor: pointer; padding: 8px 12px; border-radius: 4px; border: 1px solid #888; background: #f0f0f0; font-size: 12px; }
        .btn-primary { background: var(--accent); color: white; border: none; }

        /* å…¥åŠ›ã‚°ãƒªãƒƒãƒ‰ */
        .input-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px 30px; }
        .input-group { display: flex; flex-direction: column; margin-bottom: 10px; }
        label { font-size: 13px; font-weight: bold; margin-bottom: 5px; color: #555; }
        input, select { padding: 8px; border: 1px solid #aaa; border-radius: 4px; font-size: 14px; }
        input[readonly] { background-color: #f0f0f0; color: #666; }
        
        .result-highlight { color: #e74c3c; font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="header">å»ºç‰©ã‚³ã‚¹ãƒˆç®—å‡ºã‚·ã‚¹ãƒ†ãƒ  (ConstructionCost12.py æº–æ‹ )</div>

<div class="tab-container" id="tabBar">
    <button class="tab-btn active" onclick="openTab(event, 'property')">ç‰©ä»¶ç®¡ç†</button>
    <button class="tab-btn" onclick="openTab(event, 'calc_summary')">ã‚³ã‚¹ãƒˆã‚µãƒãƒª</button>
    <button class="tab-btn" onclick="openTab(event, 'onsen')">æ¸©æ³‰è¨­å‚™</button>
    <button class="tab-btn" onclick="openTab(event, 'restaurant')">ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</button>
    <button class="tab-btn" onclick="openTab(event, 'lounge')">ãƒ©ã‚¦ãƒ³ã‚¸</button>
    <button class="tab-btn" onclick="openTab(event, 'hallway')">é€šè·¯</button>
    <button class="tab-btn" onclick="openTab(event, 'amusement')">ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ</button>
    <button class="tab-btn" onclick="openTab(event, 'guest_room')">å®¢å®¤</button>
    <button class="tab-btn" onclick="openTab(event, 'arch_settings')">å»ºç¯‰åˆæœŸè¨­å®š</button>
    <button class="tab-btn" onclick="openTab(event, 'equipment')">è¨­å‚™è¨­å®š</button>
    <button class="tab-btn" onclick="openTab(event, 'furniture')">å®¶å…·</button>
    <button class="tab-btn" onclick="openTab(event, 'settings')">çµŒè²»è¨­å®š</button>
    <button class="tab-btn" onclick="openTab(event, 'lcc')">LCCåˆ†æ</button>
</div>

<div class="main-content">
    <div id="property" class="tab-pane active">
        <div class="section-title">ç™»éŒ²æ¸ˆã¿ç‰©ä»¶ä¸€è¦§</div>
        <div class="card property-list-area">
            <select id="propertyList" size="5"></select>
            <div class="btn-col">
                <button class="btn-primary" onclick="loadProperty()">ğŸ“‚ èª­ã¿è¾¼ã¿</button>
                <button onclick="createNewProperty()">ğŸ†• æ–°è¦ä½œæˆ</button>
                <button style="color:red;" onclick="deleteProperty()">ğŸ—‘ï¸ å‰Šé™¤</button>
            </div>
        </div>

        <div class="section-title">ç‰©ä»¶åŸºæœ¬æƒ…å ±</div>
        <div class="card">
            <div class="input-grid">
                <div class="input-group">
                    <label>ç‰©ä»¶å</label>
                    <input type="text" id="prop_name" placeholder="åç§°æœªè¨­å®š">
                </div>
                <div class="input-group">
                    <label>å»ºè¨­åœ° (åœ°åŸŸä¿‚æ•°åæ˜ )</label>
                    <select id="location_type" onchange="updateCalculations()">
                        <option value="1.00">æ±äº¬éƒ½å†… (100%)</option>
                        <option value="0.90">ãã®ä»–é–¢æ± (90%)</option>
                        <option value="0.85">é–¢è¥¿ (85%)</option>
                        <option value="0.80">åœ°æ–¹éƒ½å¸‚ (80%)</option>
                        <option value="0.75">åœ°æ–¹ (75%)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>å»ºç‰©æ§‹é€ </label>
                    <select id="structure" onchange="updateCalculations()">
                        <option value="RC">RCé€ </option>
                        <option value="S">é‰„éª¨é€ </option>
                        <option value="SRC">SRCé€ </option>
                        <option value="W">æœ¨é€ </option>
                    </select>
                </div>
                <div class="input-group">
                    <label>ã‚°ãƒ¬ãƒ¼ãƒ‰</label>
                    <select id="grade" onchange="updateCalculations()">
                        <option value="0">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰</option>
                        <option value="1">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯1</option>
                        <option value="2">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯2</option>
                        <option value="3">ãƒ‡ãƒ©ãƒƒã‚¯ã‚¹1</option>
                        <option value="4">ãƒ‡ãƒ©ãƒƒã‚¯ã‚¹2</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>å»¶åºŠé¢ç© (ã¡)</label>
                    <input type="number" id="total_floor_area" value="2000" oninput="updateCalculations()">
                </div>
                <div class="input-group">
                    <label>è£œæ­£å¾Œå»ºç¯‰å˜ä¾¡ (å††/ã¡)</label>
                    <input type="text" id="base_unit_price" readonly class="result-highlight">
                </div>
            </div>
            <div style="margin-top:20px; text-align: right;">
                <button class="btn-primary" onclick="saveProperty()">ğŸ’¾ ç‰©ä»¶ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜</button>
            </div>
        </div>
    </div>

    <div id="calc_summary" class="tab-pane"><h3>ã‚³ã‚¹ãƒˆã‚µãƒãƒª</h3></div>
    <div id="onsen" class="tab-pane"><h3>æ¸©æ³‰è¨­å‚™</h3></div>
    <div id="restaurant" class="tab-pane"><h3>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</h3></div>
    <div id="lounge" class="tab-pane"><h3>ãƒ©ã‚¦ãƒ³ã‚¸</h3></div>
    <div id="hallway" class="tab-pane"><h3>é€šè·¯</h3></div>
    <div id="amusement" class="tab-pane"><h3>ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆ</h3></div>
    <div id="guest_room" class="tab-pane"><h3>å®¢å®¤</h3></div>
    <div id="arch_settings" class="tab-pane"><h3>å»ºç¯‰åˆæœŸè¨­å®š</h3></div>
    <div id="equipment" class="tab-pane"><h3>è¨­å‚™è¨­å®š</h3></div>
    <div id="furniture" class="tab-pane"><h3>å®¶å…·</h3></div>
    <div id="settings" class="tab-pane"><h3>çµŒè²»è¨­å®š</h3></div>
    <div id="lcc" class="tab-pane"><h3>LCCåˆ†æ</h3></div>
</div>

<script>
    // Pythonç‰ˆãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ (100%æ™‚ã®å˜ä¾¡)
    const unitPriceMaster = {
        "RC":  [500000, 550000, 600000, 650000, 700000],
        "S":   [450000, 500000, 550000, 600000, 650000],
        "SRC": [550000, 600000, 650000, 700000, 750000],
        "W":   [300000, 350000, 400000, 450000, 500000]
    };

    function updateCalculations() {
        const struct = document.getElementById('structure').value;
        const gradeIdx = parseInt(document.getElementById('grade').value);
        const regionRate = parseFloat(document.getElementById('location_type').value);
        
        // åŸºæº–å˜ä¾¡ Ã— åœ°åŸŸä¿‚æ•°
        const basePrice = unitPriceMaster[struct][gradeIdx];
        const adjustedPrice = basePrice * regionRate;
        
        document.getElementById('base_unit_price').value = Math.round(adjustedPrice).toLocaleString();
    }

    // --- ç‰©ä»¶ç®¡ç†æ©Ÿèƒ½ (Local Storage) ---
    function refreshPropertyList() {
        const listSelect = document.getElementById('propertyList');
        listSelect.innerHTML = "";
        const properties = JSON.parse(localStorage.getItem('hotel_properties') || "{}");
        for (let key in properties) {
            let opt = document.createElement('option');
            opt.value = key;
            opt.textContent = properties[key].prop_name || "ç„¡é¡Œã®ç‰©ä»¶";
            listSelect.appendChild(opt);
        }
    }

    function saveProperty() {
        const propName = document.getElementById('prop_name').value || "æ–°è¦ç‰©ä»¶";
        const data = {
            prop_name: propName,
            location_type: document.getElementById('location_type').value,
            structure: document.getElementById('structure').value,
            grade: document.getElementById('grade').value,
            total_floor_area: document.getElementById('total_floor_area').value
        };
        let properties = JSON.parse(localStorage.getItem('hotel_properties') || "{}");
        properties[propName] = data;
        localStorage.setItem('hotel_properties', JSON.stringify(properties));
        alert("ä¿å­˜ã—ã¾ã—ãŸ");
        refreshPropertyList();
    }

    function loadProperty() {
        const selected = document.getElementById('propertyList').value;
        if (!selected) return alert("ç‰©ä»¶ã‚’é¸æŠã—ã¦ãã ã•ã„");
        const properties = JSON.parse(localStorage.getItem('hotel_properties') || "{}");
        const data = properties[selected];

        document.getElementById('prop_name').value = data.prop_name;
        document.getElementById('location_type').value = data.location_type;
        document.getElementById('structure').value = data.structure;
        document.getElementById('grade').value = data.grade;
        document.getElementById('total_floor_area').value = data.total_floor_area;

        updateCalculations();
    }

    function createNewProperty() {
        if(confirm("å…¥åŠ›ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) {
            document.getElementById('prop_name').value = "";
            updateCalculations();
        }
    }

    function deleteProperty() {
        const selected = document.getElementById('propertyList').value;
        if (!selected || !confirm("å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) return;
        let properties = JSON.parse(localStorage.getItem('hotel_properties') || "{}");
        delete properties[selected];
        localStorage.setItem('hotel_properties', JSON.stringify(properties));
        refreshPropertyList();
    }

    function openTab(evt, tabId) {
        const panes = document.getElementsByClassName("tab-pane");
        for (let i = 0; i < panes.length; i++) panes[i].classList.remove("active");
        const btns = document.getElementsByClassName("tab-btn");
        for (let i = 0; i < btns.length; i++) btns[i].classList.remove("active");
        document.getElementById(tabId).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    window.onload = function() {
        refreshPropertyList();
        updateCalculations();
    };
</script>

</body>
</html>